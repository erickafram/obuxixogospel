<%- include('partials/header') %>

<main class="main-content category-page">
    <div class="container">
        <div class="category-header">
            <h1 class="category-title <%= categoria %>-title">
                <%= typeof categoryName !== 'undefined' ? categoryName : categoria %>
            </h1>
            <% if (typeof categoryDescription !== 'undefined' && categoryDescription) { %>
            <p class="category-description"><%= categoryDescription %></p>
            <% } %>
        </div>

        <% if (articles && articles.length > 0) { %>
        <div class="news-grid">
            <% articles.forEach(article => { %>
            <article class="news-card">
                <a href="/<%= article.categoria %>/<%= article.urlAmigavel %>">
                    <div class="news-image">
                        <img src="<%= article.imagem %>" alt="<%= article.titulo %>" loading="lazy" width="680" height="400">
                        <span class="news-category <%= article.categoria %>">
                            <%= article.subcategoria || (typeof categoryName !== 'undefined' ? categoryName : article.categoria) %>
                        </span>
                    </div>
                    <div class="news-content">
                        <h3 class="news-title"><%= article.titulo %></h3>
                        <p class="news-description"><%= article.descricao %></p>
                        <div class="news-meta">
                            <span class="news-date">
                                <%= new Date(article.dataPublicacao).toLocaleDateString('pt-BR') %>
                            </span>
                        </div>
                    </div>
                </a>
            </article>
            <% }); %>
        </div>

        <!-- Paginação -->
        <% if (totalPages > 1) { %>
        <div class="pagination">
            <% if (currentPage > 1) { %>
                <a href="/categoria/<%= categoria %>?page=<%= currentPage - 1 %>" class="pagination-btn">
                    <i class="fas fa-chevron-left"></i> Anterior
                </a>
            <% } %>
            
            <span class="pagination-info">
                Página <%= currentPage %> de <%= totalPages %>
            </span>
            
            <% if (currentPage < totalPages) { %>
                <a href="/categoria/<%= categoria %>?page=<%= currentPage + 1 %>" class="pagination-btn">
                    Próxima <i class="fas fa-chevron-right"></i>
                </a>
            <% } %>
        </div>
        <% } %>
        <% } else { %>
        <div class="no-results">
            <p>Nenhuma notícia encontrada nesta categoria.</p>
        </div>
        <% } %>
    </div>
</main>

<%- include('partials/footer') %>
